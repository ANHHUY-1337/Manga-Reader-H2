{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hoala\\\\OneDrive\\\\Desktop\\\\2025\\\\cncmanga\\\\cncmanga\\\\src\\\\layout\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useGoogleLogin } from '@react-oauth/google';\nimport { useContext, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport Context from '../../state/Context';\nimport storage from '../../utils';\nimport backgroundImage from '../../assets/background.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const {\n    setIsLogin,\n    setUser\n  } = useContext(Context);\n  useEffect(() => {\n    const savedUser = storage.get('user', null);\n    savedUser && setUser(savedUser);\n  }, []);\n  const handleLogin = useGoogleLogin({\n    onSuccess: credentialResponse => {\n      const accessToken = credentialResponse.access_token;\n      fetchUserInfo(accessToken);\n    },\n    onError: () => {\n      console.log('Login Failed!');\n      toast.error('Đăng nhập thất bại!', {\n        duration: 1000\n      });\n    }\n  });\n  const fetchUserInfo = async accessToken => {\n    try {\n      const response = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      });\n      const userInfo = await response.json();\n      userInfo['background'] = backgroundImage;\n      setUser(userInfo);\n      setIsLogin(true);\n      storage.set('user', userInfo);\n      toast.success(`Xin chào! ${userInfo === null || userInfo === void 0 ? void 0 : userInfo.name}`, {\n        duration: 1500\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLogin,\n    className: \"bg-[#10b981] text-sm px-[16px] py-[8px] rounded-[8px] text-[#fff] font-[600] transition-all hover:opacity-[.8]\",\n    children: \"\\u0110\\u0103ng nh\\u1EADp\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"iUusV9f5/t+v2jvw/4MsGLVxor0=\", false, function () {\n  return [useGoogleLogin];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useGoogleLogin","useContext","useEffect","toast","Context","storage","backgroundImage","jsxDEV","_jsxDEV","Login","_s","setIsLogin","setUser","savedUser","get","handleLogin","onSuccess","credentialResponse","accessToken","access_token","fetchUserInfo","onError","console","log","error","duration","response","fetch","headers","Authorization","userInfo","json","set","success","name","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/hoala/OneDrive/Desktop/2025/cncmanga/cncmanga/src/layout/components/Login.js"],"sourcesContent":["import { useGoogleLogin } from '@react-oauth/google';\r\nimport { useContext, useEffect } from 'react';\r\nimport toast from 'react-hot-toast';\r\n\r\nimport Context from '../../state/Context';\r\nimport storage from '../../utils'\r\nimport backgroundImage from '../../assets/background.jpg'\r\n\r\nfunction Login() {\r\n    const { setIsLogin, setUser } = useContext(Context)\r\n\r\n    useEffect(() => {\r\n        const savedUser = storage.get('user', null)\r\n        savedUser && setUser(savedUser)\r\n    }, [])\r\n\r\n    const handleLogin = useGoogleLogin({\r\n        onSuccess: credentialResponse => {\r\n            const accessToken = credentialResponse.access_token\r\n            fetchUserInfo(accessToken)\r\n        },\r\n        onError: () => {\r\n            console.log('Login Failed!');\r\n            toast.error('Đăng nhập thất bại!', { duration: 1000 })\r\n        }\r\n    })\r\n\r\n    const fetchUserInfo = async (accessToken) => {\r\n        try {\r\n            const response = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                },\r\n            })\r\n            const userInfo = await response.json()\r\n            userInfo['background'] = backgroundImage\r\n            setUser(userInfo)\r\n            setIsLogin(true)\r\n            storage.set('user', userInfo)\r\n            toast.success(`Xin chào! ${userInfo?.name}`, { duration: 1500 })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button onClick={handleLogin} className=\"bg-[#10b981] text-sm px-[16px] py-[8px] rounded-[8px] text-[#fff] font-[600] transition-all hover:opacity-[.8]\">Đăng nhập</button>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":";;AAAA,SAASA,cAAc,QAAQ,qBAAqB;AACpD,SAASC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7C,OAAOC,KAAK,MAAM,iBAAiB;AAEnC,OAAOC,OAAO,MAAM,qBAAqB;AACzC,OAAOC,OAAO,MAAM,aAAa;AACjC,OAAOC,eAAe,MAAM,6BAA6B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzD,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM;IAAEC,UAAU;IAAEC;EAAQ,CAAC,GAAGX,UAAU,CAACG,OAAO,CAAC;EAEnDF,SAAS,CAAC,MAAM;IACZ,MAAMW,SAAS,GAAGR,OAAO,CAACS,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC;IAC3CD,SAAS,IAAID,OAAO,CAACC,SAAS,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,WAAW,GAAGf,cAAc,CAAC;IAC/BgB,SAAS,EAAEC,kBAAkB,IAAI;MAC7B,MAAMC,WAAW,GAAGD,kBAAkB,CAACE,YAAY;MACnDC,aAAa,CAACF,WAAW,CAAC;IAC9B,CAAC;IACDG,OAAO,EAAEA,CAAA,KAAM;MACXC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;MAC5BpB,KAAK,CAACqB,KAAK,CAAC,qBAAqB,EAAE;QAAEC,QAAQ,EAAE;MAAK,CAAC,CAAC;IAC1D;EACJ,CAAC,CAAC;EAEF,MAAML,aAAa,GAAG,MAAOF,WAAW,IAAK;IACzC,IAAI;MACA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,+CAA+C,EAAE;QAC1EC,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUX,WAAW;QACxC;MACJ,CAAC,CAAC;MACF,MAAMY,QAAQ,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MACtCD,QAAQ,CAAC,YAAY,CAAC,GAAGxB,eAAe;MACxCM,OAAO,CAACkB,QAAQ,CAAC;MACjBnB,UAAU,CAAC,IAAI,CAAC;MAChBN,OAAO,CAAC2B,GAAG,CAAC,MAAM,EAAEF,QAAQ,CAAC;MAC7B3B,KAAK,CAAC8B,OAAO,CAAC,aAAaH,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEI,IAAI,EAAE,EAAE;QAAET,QAAQ,EAAE;MAAK,CAAC,CAAC;IACpE,CAAC,CAAC,OAAOD,KAAK,EAAE;MACZF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IACtB;EACJ,CAAC;EAED,oBACIhB,OAAA;IAAQ2B,OAAO,EAAEpB,WAAY;IAACqB,SAAS,EAAC,gHAAgH;IAAAC,QAAA,EAAC;EAAS;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEnL;AAAC/B,EAAA,CAxCQD,KAAK;EAAA,QAQUT,cAAc;AAAA;AAAA0C,EAAA,GAR7BjC,KAAK;AA0Cd,eAAeA,KAAK;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}