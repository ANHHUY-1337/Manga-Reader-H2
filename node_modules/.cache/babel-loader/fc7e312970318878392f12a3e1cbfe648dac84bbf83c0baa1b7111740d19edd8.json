{"ast":null,"code":"import{useEffect,useState}from\"react\";import{googleLogout}from\"@react-oauth/google\";import storage,{setScrollDocument}from'../utils';import Context from\"./Context\";import{jsx as _jsx}from\"react/jsx-runtime\";function Provider(_ref){let{children}=_ref;const[width,setWidth]=useState(window.innerWidth);const[isOpenDiaLog,setIsOpenDiaLog]=useState(false);const[isLogin,setIsLogin]=useState(()=>{const isLogin=storage.get('user',false);return!!isLogin;});const[user,setUser]=useState(()=>{return storage.get('user',null);});const[theme,setTheme]=useState(()=>{return storage.get('theme','light');});const[quantityComicArchive,setQuantityComicArchive]=useState(()=>{var _comicStorage$user$em;const comicStorage=storage.get('comic-storage',{});return(_comicStorage$user$em=comicStorage[user===null||user===void 0?void 0:user.email])===null||_comicStorage$user$em===void 0?void 0:_comicStorage$user$em.length;});const[quantityComicHistory,setQuantityComicHistory]=useState(()=>{var _Object$keys;const historyStorage=storage.get('history-storage',{});if(!historyStorage[user===null||user===void 0?void 0:user.email]){historyStorage[user===null||user===void 0?void 0:user.email]={};}return(_Object$keys=Object.keys(historyStorage[user===null||user===void 0?void 0:user.email]))===null||_Object$keys===void 0?void 0:_Object$keys.length;});useEffect(()=>{setQuantityComicArchive(()=>{var _comicStorage$user$em2;const comicStorage=storage.get('comic-storage',{});return(_comicStorage$user$em2=comicStorage[user===null||user===void 0?void 0:user.email])===null||_comicStorage$user$em2===void 0?void 0:_comicStorage$user$em2.length;});setQuantityComicHistory(()=>{const historyStorage=storage.get('history-storage',{});if(!historyStorage[user===null||user===void 0?void 0:user.email]){historyStorage[user===null||user===void 0?void 0:user.email]={};}return Object.keys(historyStorage[user===null||user===void 0?void 0:user.email]).length;});},[user]);useEffect(()=>{const handleReSize=()=>{setWidth(window.innerWidth);};window.addEventListener('resize',handleReSize);return()=>document.removeEventListener('resize',handleReSize);},[]);useEffect(()=>{storage.set('theme',theme);document.documentElement.classList.remove('light','dark');theme==='light'?document.documentElement.classList.toggle('light'):document.documentElement.classList.toggle('dark');},[theme]);useEffect(()=>{setScrollDocument(isOpenDiaLog);},[isOpenDiaLog]);const handleLogout=()=>{googleLogout();setUser(null);setIsLogin(false);window.location.href='/';localStorage.removeItem('user');};const value={isLogin,user,width,theme,isOpenDiaLog,quantityComicArchive,quantityComicHistory,setUser,setIsLogin,handleLogout,setTheme,setIsOpenDiaLog,setQuantityComicArchive,setQuantityComicHistory};return/*#__PURE__*/_jsx(Context.Provider,{value:value,children:children});}export default Provider;","map":{"version":3,"names":["useEffect","useState","googleLogout","storage","setScrollDocument","Context","jsx","_jsx","Provider","_ref","children","width","setWidth","window","innerWidth","isOpenDiaLog","setIsOpenDiaLog","isLogin","setIsLogin","get","user","setUser","theme","setTheme","quantityComicArchive","setQuantityComicArchive","_comicStorage$user$em","comicStorage","email","length","quantityComicHistory","setQuantityComicHistory","_Object$keys","historyStorage","Object","keys","_comicStorage$user$em2","handleReSize","addEventListener","document","removeEventListener","set","documentElement","classList","remove","toggle","handleLogout","location","href","localStorage","removeItem","value"],"sources":["C:/Users/hoala/OneDrive/Desktop/2025/cncmanga/cncmanga/src/state/Provider.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { googleLogout } from \"@react-oauth/google\";\r\n\r\nimport storage, { setScrollDocument } from '../utils'\r\nimport Context from \"./Context\";\r\n\r\nfunction Provider({ children }) {\r\n    const [width, setWidth] = useState(window.innerWidth)\r\n    const [isOpenDiaLog, setIsOpenDiaLog] = useState(false)\r\n    const [isLogin, setIsLogin] = useState(() => {\r\n        const isLogin = storage.get('user', false)\r\n        return !!isLogin\r\n    })\r\n    const [user, setUser] = useState(() => {\r\n        return storage.get('user', null)\r\n    })\r\n    const [theme, setTheme] = useState(() => {\r\n        return storage.get('theme', 'light')\r\n    })\r\n    const [quantityComicArchive, setQuantityComicArchive] = useState(() => {\r\n        const comicStorage = storage.get('comic-storage', {})\r\n        return comicStorage[user?.email]?.length\r\n    })\r\n    const [quantityComicHistory, setQuantityComicHistory] = useState(() => {\r\n        const historyStorage = storage.get('history-storage', {})\r\n        if (!historyStorage[user?.email]) {\r\n            historyStorage[user?.email] = {}\r\n        }\r\n        return Object.keys(historyStorage[user?.email])?.length\r\n    })\r\n\r\n    useEffect(() => {\r\n        setQuantityComicArchive(() => {\r\n            const comicStorage = storage.get('comic-storage', {})\r\n            return comicStorage[user?.email]?.length\r\n        })\r\n        setQuantityComicHistory(() => {\r\n            const historyStorage = storage.get('history-storage', {})\r\n            if (!historyStorage[user?.email]) {\r\n                historyStorage[user?.email] = {}\r\n            }\r\n            return Object.keys(historyStorage[user?.email]).length\r\n        })\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        const handleReSize = () => {\r\n            setWidth(window.innerWidth)\r\n        }\r\n        window.addEventListener('resize', handleReSize)\r\n        return () => document.removeEventListener('resize', handleReSize)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        storage.set('theme', theme)\r\n        document.documentElement.classList.remove('light', 'dark')\r\n        theme === 'light' ?\r\n            document.documentElement.classList.toggle('light') :\r\n            document.documentElement.classList.toggle('dark')\r\n    }, [theme])\r\n\r\n    useEffect(() => {\r\n        setScrollDocument(isOpenDiaLog)\r\n    }, [isOpenDiaLog])\r\n\r\n    const handleLogout = () => {\r\n        googleLogout()\r\n        setUser(null)\r\n        setIsLogin(false)\r\n        window.location.href = '/'\r\n        localStorage.removeItem('user')\r\n    }\r\n\r\n    const value = {\r\n        isLogin,\r\n        user,\r\n        width,\r\n        theme,\r\n        isOpenDiaLog,\r\n        quantityComicArchive,\r\n        quantityComicHistory,\r\n        setUser,\r\n        setIsLogin,\r\n        handleLogout,\r\n        setTheme,\r\n        setIsOpenDiaLog,\r\n        setQuantityComicArchive,\r\n        setQuantityComicHistory\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={value}>\r\n            {children}\r\n        </Context.Provider>\r\n    );\r\n}\r\n\r\nexport default Provider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}