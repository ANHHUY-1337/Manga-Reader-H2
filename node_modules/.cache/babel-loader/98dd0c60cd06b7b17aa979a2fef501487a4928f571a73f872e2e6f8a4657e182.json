{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hoala\\\\OneDrive\\\\Desktop\\\\2025\\\\cncmanga\\\\cncmanga\\\\src\\\\pages\\\\Search.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect, Fragment, useContext } from \"react\";\nimport useFetch from \"../hooks/UseFetch\";\nimport Comic from \"../layout/components/Comic\";\nimport { search } from \"../api\";\nimport Pagination from \"../layout/components/Pagination\";\nimport Context from \"../state/Context\";\nimport { handleSetActivity } from \"../utils\";\nimport searchNotFoundImage from '../assets/searchNotFound.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Search() {\n  _s();\n  var _data$data4, _data$data4$params, _data$data4$params$pa;\n  const {\n    user\n  } = useContext(Context);\n  const params = useParams();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [data] = useFetch(`${search}${params.keyword}&page=${currentPage}`);\n  const [result, setResult] = useState([]);\n  const [totalPage, setTotalPage] = useState(0);\n  useEffect(() => {\n    if (data) {\n      var _data$data, _data$data$params, _data$data$params$pag, _data$data2, _data$data2$params, _data$data2$params$pa, _data$data3;\n      const totalItems = data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : (_data$data$params = _data$data.params) === null || _data$data$params === void 0 ? void 0 : (_data$data$params$pag = _data$data$params.pagination) === null || _data$data$params$pag === void 0 ? void 0 : _data$data$params$pag.totalItems;\n      const totalItemsPerPage = data === null || data === void 0 ? void 0 : (_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : (_data$data2$params = _data$data2.params) === null || _data$data2$params === void 0 ? void 0 : (_data$data2$params$pa = _data$data2$params.pagination) === null || _data$data2$params$pa === void 0 ? void 0 : _data$data2$params$pa.totalItemsPerPage;\n      setResult((data === null || data === void 0 ? void 0 : (_data$data3 = data.data) === null || _data$data3 === void 0 ? void 0 : _data$data3.items) || []);\n      totalItems > totalItemsPerPage ? setTotalPage(Math.round(totalItems / totalItemsPerPage)) : setTotalPage(1);\n    }\n  }, [data]);\n  useEffect(() => {\n    setCurrentPage(1);\n    handleSetActivity(user, params === null || params === void 0 ? void 0 : params.keyword, 'search');\n  }, [params.keyword]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: [!data && /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"lg:text-2xl mobile:text-xl font-[600] dark:text-[#fff]\",\n      children: \"\\u0110ang t\\xECm ki\\u1EBFm truy\\u1EC7n ph\\xF9 h\\u1EE3p...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 23\n    }, this), data && /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"mb-[32px] lg:text-2xl mobile:text-xl font-[600] text-[#10b981] dark:text-[#fff] p-[8px] rounded-[8px] border-2 border-solid border-[#10b981] dark:border-[#636363] bg-[rgba(16,185,129,0.15)] dark:bg-[rgba(204,204,204,0.2)]\",\n        children: result.length > 0 ? `Tìm kiếm được \n                                ${data === null || data === void 0 ? void 0 : (_data$data4 = data.data) === null || _data$data4 === void 0 ? void 0 : (_data$data4$params = _data$data4.params) === null || _data$data4$params === void 0 ? void 0 : (_data$data4$params$pa = _data$data4$params.pagination) === null || _data$data4$params$pa === void 0 ? void 0 : _data$data4$params$pa.totalItems} \n                                truyện phù hợp cho từ khoá ''${params.keyword}''` : `Không tìm kiếm được truyện phù hợp cho từ khoá ''${params.keyword}''`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 21\n      }, this), result.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex mx-[-8px] flex-wrap gap-y-[24px]\",\n        children: result.map((comic, index) => /*#__PURE__*/_jsxDEV(Comic, {\n          data: comic\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 43\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundImage: `url(${searchNotFoundImage})`\n          },\n          className: \"lg:w-[30vw] lg:h-[420px] sm:w-[40vw] sm:h-[360px] mobile:w-[50vw] h-[300px] bg-cover bg-repeat bg-center \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }, this), result.length > 0 && /*#__PURE__*/_jsxDEV(Pagination, {\n      currentPage: currentPage,\n      totalPage: totalPage,\n      itemsPerPage: window.innerWidth > 786 ? 10 : 4,\n      setCurrentPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n_s(Search, \"W07TH7ws4hP9hqydv/O+YXQPTJA=\", false, function () {\n  return [useParams, useFetch];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useParams","useState","useEffect","Fragment","useContext","useFetch","Comic","search","Pagination","Context","handleSetActivity","searchNotFoundImage","jsxDEV","_jsxDEV","Search","_s","_data$data4","_data$data4$params","_data$data4$params$pa","user","params","currentPage","setCurrentPage","data","keyword","result","setResult","totalPage","setTotalPage","_data$data","_data$data$params","_data$data$params$pag","_data$data2","_data$data2$params","_data$data2$params$pa","_data$data3","totalItems","pagination","totalItemsPerPage","items","Math","round","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","comic","index","style","backgroundImage","itemsPerPage","window","innerWidth","_c","$RefreshReg$"],"sources":["C:/Users/hoala/OneDrive/Desktop/2025/cncmanga/cncmanga/src/pages/Search.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport { useState, useEffect, Fragment, useContext } from \"react\";\r\n\r\nimport useFetch from \"../hooks/UseFetch\";\r\nimport Comic from \"../layout/components/Comic\";\r\nimport { search } from \"../api\";\r\nimport Pagination from \"../layout/components/Pagination\";\r\nimport Context from \"../state/Context\";\r\nimport { handleSetActivity } from \"../utils\";\r\nimport searchNotFoundImage from '../assets/searchNotFound.png'\r\n\r\nfunction Search() {\r\n    const { user } = useContext(Context)\r\n    const params = useParams()\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [data] = useFetch(\r\n        `${search}${params.keyword}&page=${currentPage}`)\r\n    const [result, setResult] = useState([])\r\n    const [totalPage, setTotalPage] = useState(0)\r\n\r\n    useEffect(() => {\r\n        if (data) {\r\n            const totalItems =\r\n                data?.data?.params?.pagination?.totalItems\r\n            const totalItemsPerPage =\r\n                data?.data?.params?.pagination?.totalItemsPerPage\r\n            setResult(data?.data?.items || [])\r\n            totalItems > totalItemsPerPage ?\r\n                setTotalPage(Math.round(totalItems / totalItemsPerPage)) :\r\n                setTotalPage(1)\r\n        }\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n        setCurrentPage(1)\r\n        handleSetActivity(user, params?.keyword, 'search')\r\n    }, [params.keyword])\r\n\r\n    return (\r\n        <div className=''>\r\n            {!data && <h4 className='lg:text-2xl mobile:text-xl font-[600] dark:text-[#fff]'>Đang tìm kiếm truyện phù hợp...</h4>}\r\n            {data &&\r\n                <Fragment>\r\n                    <h4 className=\"mb-[32px] lg:text-2xl mobile:text-xl font-[600] text-[#10b981] dark:text-[#fff] p-[8px] rounded-[8px] border-2 border-solid border-[#10b981] dark:border-[#636363] bg-[rgba(16,185,129,0.15)] dark:bg-[rgba(204,204,204,0.2)]\">\r\n                        {result.length > 0 ?\r\n                            `Tìm kiếm được \r\n                                ${data?.data?.params?.pagination?.totalItems} \r\n                                truyện phù hợp cho từ khoá ''${params.keyword}''` :\r\n                            `Không tìm kiếm được truyện phù hợp cho từ khoá ''${params.keyword}''`\r\n                        }\r\n                    </h4>\r\n                    {result.length > 0 ? (<div className='flex mx-[-8px] flex-wrap gap-y-[24px]'>\r\n                        {result.map((comic, index) => (\r\n                            <Comic key={index} data={comic} />\r\n                        ))}\r\n                    </div>) : (\r\n                        <div className=\"flex items-center justify-center\">\r\n                            <div\r\n                                style={{ backgroundImage: `url(${searchNotFoundImage})` }} className=\"lg:w-[30vw] lg:h-[420px] sm:w-[40vw] sm:h-[360px] mobile:w-[50vw] h-[300px] bg-cover bg-repeat bg-center \"></div>\r\n                        </div>\r\n                    )}\r\n                </Fragment>}\r\n            {result.length > 0 &&\r\n                <Pagination\r\n                    currentPage={currentPage}\r\n                    totalPage={totalPage}\r\n                    itemsPerPage={window.innerWidth > 786 ? 10 : 4}\r\n                    setCurrentPage={setCurrentPage}\r\n                />}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}