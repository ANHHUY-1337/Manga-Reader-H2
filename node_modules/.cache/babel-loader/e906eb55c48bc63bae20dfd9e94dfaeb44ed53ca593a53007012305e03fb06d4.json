{"ast":null,"code":"import{useGoogleLogin}from'@react-oauth/google';import{useContext,useEffect}from'react';import toast from'react-hot-toast';import Context from'../../state/Context';import storage from'../../utils';import backgroundImage from'../../assets/background.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";function Login(){const{setIsLogin,setUser}=useContext(Context);useEffect(()=>{const savedUser=storage.get('user',null);savedUser&&setUser(savedUser);},[]);const handleLogin=useGoogleLogin({onSuccess:credentialResponse=>{const accessToken=credentialResponse.access_token;fetchUserInfo(accessToken);},onError:()=>{console.log('Login Failed!');toast.error('Đăng nhập thất bại!',{duration:1000});}});const fetchUserInfo=async accessToken=>{try{const response=await fetch('https://www.googleapis.com/oauth2/v3/userinfo',{headers:{Authorization:\"Bearer \".concat(accessToken)}});const userInfo=await response.json();userInfo['background']=backgroundImage;setUser(userInfo);setIsLogin(true);storage.set('user',userInfo);toast.success(\"Xin ch\\xE0o! \".concat(userInfo===null||userInfo===void 0?void 0:userInfo.name),{duration:1500});}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:\"bg-[#10b981] text-sm px-[16px] py-[8px] rounded-[8px] text-[#fff] font-[600] transition-all hover:opacity-[.8]\",children:\"\\u0110\\u0103ng nh\\u1EADp\"});}export default Login;","map":{"version":3,"names":["useGoogleLogin","useContext","useEffect","toast","Context","storage","backgroundImage","jsx","_jsx","Login","setIsLogin","setUser","savedUser","get","handleLogin","onSuccess","credentialResponse","accessToken","access_token","fetchUserInfo","onError","console","log","error","duration","response","fetch","headers","Authorization","concat","userInfo","json","set","success","name","onClick","className","children"],"sources":["C:/Users/hoala/OneDrive/Desktop/2025/cncmanga/cncmanga/src/layout/components/Login.js"],"sourcesContent":["import { useGoogleLogin } from '@react-oauth/google';\r\nimport { useContext, useEffect } from 'react';\r\nimport toast from 'react-hot-toast';\r\n\r\nimport Context from '../../state/Context';\r\nimport storage from '../../utils'\r\nimport backgroundImage from '../../assets/background.jpg'\r\n\r\nfunction Login() {\r\n    const { setIsLogin, setUser } = useContext(Context)\r\n\r\n    useEffect(() => {\r\n        const savedUser = storage.get('user', null)\r\n        savedUser && setUser(savedUser)\r\n    }, [])\r\n\r\n    const handleLogin = useGoogleLogin({\r\n        onSuccess: credentialResponse => {\r\n            const accessToken = credentialResponse.access_token\r\n            fetchUserInfo(accessToken)\r\n        },\r\n        onError: () => {\r\n            console.log('Login Failed!');\r\n            toast.error('Đăng nhập thất bại!', { duration: 1000 })\r\n        }\r\n    })\r\n\r\n    const fetchUserInfo = async (accessToken) => {\r\n        try {\r\n            const response = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                },\r\n            })\r\n            const userInfo = await response.json()\r\n            userInfo['background'] = backgroundImage\r\n            setUser(userInfo)\r\n            setIsLogin(true)\r\n            storage.set('user', userInfo)\r\n            toast.success(`Xin chào! ${userInfo?.name}`, { duration: 1500 })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button onClick={handleLogin} className=\"bg-[#10b981] text-sm px-[16px] py-[8px] rounded-[8px] text-[#fff] font-[600] transition-all hover:opacity-[.8]\">Đăng nhập</button>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"AAAA,OAASA,cAAc,KAAQ,qBAAqB,CACpD,OAASC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7C,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CAEnC,MAAO,CAAAC,OAAO,KAAM,qBAAqB,CACzC,MAAO,CAAAC,OAAO,KAAM,aAAa,CACjC,MAAO,CAAAC,eAAe,KAAM,6BAA6B,QAAAC,GAAA,IAAAC,IAAA,yBAEzD,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,KAAM,CAAEC,UAAU,CAAEC,OAAQ,CAAC,CAAGV,UAAU,CAACG,OAAO,CAAC,CAEnDF,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAU,SAAS,CAAGP,OAAO,CAACQ,GAAG,CAAC,MAAM,CAAE,IAAI,CAAC,CAC3CD,SAAS,EAAID,OAAO,CAACC,SAAS,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,WAAW,CAAGd,cAAc,CAAC,CAC/Be,SAAS,CAAEC,kBAAkB,EAAI,CAC7B,KAAM,CAAAC,WAAW,CAAGD,kBAAkB,CAACE,YAAY,CACnDC,aAAa,CAACF,WAAW,CAAC,CAC9B,CAAC,CACDG,OAAO,CAAEA,CAAA,GAAM,CACXC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5BnB,KAAK,CAACoB,KAAK,CAAC,qBAAqB,CAAE,CAAEC,QAAQ,CAAE,IAAK,CAAC,CAAC,CAC1D,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAL,aAAa,CAAG,KAAO,CAAAF,WAAW,EAAK,CACzC,GAAI,CACA,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,+CAA+C,CAAE,CAC1EC,OAAO,CAAE,CACLC,aAAa,WAAAC,MAAA,CAAYZ,WAAW,CACxC,CACJ,CAAC,CAAC,CACF,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACtCD,QAAQ,CAAC,YAAY,CAAC,CAAGxB,eAAe,CACxCK,OAAO,CAACmB,QAAQ,CAAC,CACjBpB,UAAU,CAAC,IAAI,CAAC,CAChBL,OAAO,CAAC2B,GAAG,CAAC,MAAM,CAAEF,QAAQ,CAAC,CAC7B3B,KAAK,CAAC8B,OAAO,iBAAAJ,MAAA,CAAcC,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEI,IAAI,EAAI,CAAEV,QAAQ,CAAE,IAAK,CAAC,CAAC,CACpE,CAAE,MAAOD,KAAK,CAAE,CACZF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC,CACtB,CACJ,CAAC,CAED,mBACIf,IAAA,WAAQ2B,OAAO,CAAErB,WAAY,CAACsB,SAAS,CAAC,gHAAgH,CAAAC,QAAA,CAAC,0BAAS,CAAQ,CAAC,CAEnL,CAEA,cAAe,CAAA5B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}